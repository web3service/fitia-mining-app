<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FITIA MINING RIG</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
</head>
<body>

    <!-- LOADER -->
    <div id="loader" class="hidden">
        <div class="spinner"></div>
        <p id="loader-text">Transaction en cours...</p>
    </div>
    
    <!-- TOAST NOTIFICATIONS -->
    <div id="toast-container"></div>

    <!-- HEADER -->
    <header>
        <div class="logo">FITIA <span class="blink">MINING RIG</span></div>
        <div class="header-right">
            <button id="btn-connect" class="btn-connect" onclick="app.connectWallet()">Connecter Wallet</button>
            <div id="wallet-display" class="hidden">
                <span id="addr-short">0x00...00</span>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <!-- DASHBOARD -->
        <section id="page-dashboard" class="section active">
            
            <!-- Parrainage -->
            <div class="card" style="border-left: 4px solid #00d2ff;">
                <h3>Programme de Parrainage</h3>
                <p style="font-size:0.8rem; color:#888; margin-bottom:10px;">Entrez le code de votre parrain pour activer les bonus.</p>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="referrer-input" placeholder="Adresse du parrain (0x...)" style="flex:1; padding:8px; background:#000; border:1px solid #333; color:white;">
                    <button class="btn-primary" style="width:auto; margin:0;" onclick="app.setReferrer()">Valider</button>
                </div>
            </div>

            <div class="stats-overview">
                <div class="stat-card power">
                    <h3>PUISSANCE ACTIVE</h3>
                    <div class="value" id="total-power">0.00</div>
                    <small>FTA / sec</small>
                </div>
                <div class="stat-card rewards">
                    <h3>À RÉCLAMER</h3>
                    <div class="value" id="pending-rewards">0.00</div>
                    <small>FTA Disponibles</small>
                </div>
            </div>

            <div class="control-panel">
                <button class="btn-mine" onclick="app.claim()">
                    <span class="btn-icon">⚡</span>
                    RÉCLAMER LES GAINS
                </button>
            </div>

            <div class="card">
                <h3>Journal Système</h3>
                <ul id="logs" class="log-list"></ul>
            </div>
        </section>

        <!-- SHOP -->
        <section id="page-shop" class="section">
            <h2>BOUTIQUE DE RIGS</h2>
            <p class="subtitle">Durée de vie : 90 jours. Paiement en USDT.</p>
            <div id="shop-grid" class="grid-3"></div>
        </section>

        <!-- SWAP -->
        <section id="page-swap" class="section">
            <h2>ÉCHANGE DE TOKENS</h2>
            <div class="card swap-card">
                <div class="swap-header">
                    <span>Vous payez</span>
                    <span>Balance: <span id="swap-balance-from">0</span></span>
                </div>
                <div class="input-group">
                    <input type="number" id="amount-from" placeholder="0.0" oninput="app.calcSwap()">
                    <select id="token-from" onchange="app.swapTokens()">
                        <option value="USDT">USDT</option>
                        <option value="FTA">FTA</option>
                    </select>
                </div>
                
                <div class="swap-arrow" onclick="app.swapTokens()">⇅</div>

                <div class="swap-header">
                    <span>Vous recevez</span>
                    <span>Balance: <span id="swap-balance-to">0</span></span>
                </div>
                <div class="input-group">
                    <input type="number" id="amount-to" placeholder="0.0" readonly>
                    <select id="token-to" disabled>
                        <option value="FTA">FTA</option>
                        <option value="USDT">USDT</option>
                    </select>
                </div>

                <button class="btn-primary" id="btn-swap-action" onclick="app.executeSwap()">ÉCHANGER</button>
                <div class="rate-info" id="rate-display">Taux actuel : Chargement...</div>
            </div>
        </section>

        <!-- INVENTORY -->
        <section id="page-inventory" class="section">
            <h2>VOS RIGS ACTIFS</h2>
            <div id="inventory-list" class="grid-list"></div>
        </section>
    </main>

    <!-- NAVIGATION -->
    <nav>
        <button class="nav-btn active" onclick="app.nav('dashboard')">
            <svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
            Tableau de bord
        </button>
        <button class="nav-btn" onclick="app.nav('shop')">
            <svg viewBox="0 0 24 24"><path d="M12 2l-5.5 9h11z"/></svg>
            Boutique
        </button>
        <button class="nav-btn" onclick="app.nav('swap')">
            <svg viewBox="0 0 24 24"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/></svg>
            Échange
        </button>
        <button class="nav-btn" onclick="app.nav('inventory')">
            <svg viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/></svg>
            Mes Rigs
        </button>
    </nav>

    <script src="script.js"></script>
</body>
</html>